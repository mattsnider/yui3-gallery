YUI.add("gallery-html5-forms",function(g){if(g.JSON){}function l(B,D){var C;B.on("blur",function(){clearTimeout(C);D.apply(B,arguments);});B.on("keydown",function(){var E=arguments;clearTimeout(C);C=setTimeout(function(){D.apply(B,E);},1000);});}function u(C){var B=C.get(y),D=C.getValue();return h.isValue(B)&&D?o(D)<=B:true;}function s(B){var C=B.get(x),D=B.getValue();return h.isValue(C)&&D?o(D)>=C:true;}function f(B){var D=B.get(m),C=B.getValue(),E;if(D&&C){E=RegExp(D);return C.match(E);}return true;}function a(B){var C=B.get(e),D=B.getValue();if(C){if(D&&D!=C){b(B,false);}else{B.set("value",C);b(B,true);}}}function r(B){var C=B.get(e),D=B.getValue();return B.get(p)?D&&D!=C:true;}function n(B){var C=B.get("id"),E=B.get("type"),D,G,F;if("text"==E.toLowerCase()){D=B.get("parentNode").get("innerHTML");G=new RegExp('.*?id="'+C+'"\\s+type="(\\w+)".*',"i");F=new RegExp('.*?type="(\\w+)"\\s+id="'+C+'".*',"i");E=G.exec(D);if(E){return E[1];}else{E=F.exec(D);}}return E?E[1]:"text";}function v(B,C){return B[C]||B.getAttribute(C);}function j(B,C){return B.hasAttribute(C);}function o(B){try{return parseInt(B);}catch(C){return null;}}function i(B,C,D){B[C]=D;B.setAttribute(C,D);}function b(C,B){C.toggleClass(d.CLS_PLACEHOLDER,B);}function w(C){var D=true,B=C.get("tagName").toUpperCase();if("SELECT"!=B){a(C);}D=r(C);if("INPUT"==B){D=D&&f(C);D=D&&u(C);D=D&&s(C);}C.toggleClass(d.CLS_VALID,D);C.toggleClass(d.CLS_INVALID,!D);return D;}var z="aftervalidationfx",q="autofocus",A="boundingBox",y="max",x="min",m="pattern",e="placeholder",p="required",t="step",k="html5supported",c={email:/^[A-Z0-9._%-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i,url:/((https?|ftp|gopher|telnet|file|notes|ms-help):((\/\/)|(\\\\))+[\w\d:#@%/;$()~_?\+-=\\\.&]*)/i},h=g.Lang,d=g.Base.create("html5_input_attrs",g.Widget,[],{_handleBlur:function(F){var D=this,B=F.target,E=D.get(k)?F.target.test("input:valid"):w(B),C=D.get(z);D.disableForm(E&&D.isFormValid());if(C){C(E,B,D);}},_handleFocus:function(E){var B=E.target,C=B.get(e),D=B.getValue();if(D==C){B.set("value","");b(B,false);}},_handleSubmit:function(D){var B=true,C=this.get("submitfx");this._fields.each(function(E){B=B&&w(E);});if(C||!B){D.halt();if(C){C.call(D.target,D,this);}}},bindUI:function(){var E=this,F=false,B=E.get(A),D=false,C=E.get(k);if(C){if(E.get(z)){E._fields.each(function(G){l(G,g.bind(E._handleBlur,E));});}}else{E._fields.each(function(G){var I=G.get(m),J=G.get(y)||G.get(x)||G.get(m)||G.get(p),H=G.get(e),K=n(G);if(K&&c[K]&&!I){G.set(m,c[K]);J=true;}if(H){G.on("focus",g.bind(E._handleFocus,E));}if(G.get(q)&&!F){setTimeout(function(){G.focus();},1);F=true;}w(G);if(J||H){D=true;l(G,g.bind(E._handleBlur,E));}});}if((D||E.get("submitfx"))&&E._form){B.on("submit",g.bind(E._handleSubmit,E));}},disableForm:function(B){if(this._form){this._form[B?"removeAttribute":"set"]("disabled","disabled");}if(this._btnsubmit){this._btnsubmit[B?"removeAttribute":"set"]("disabled","disabled");}},initializer:function(){var E=this,B=g.Modernizr.input.autofocus&&g.Modernizr.input.max&&g.Modernizr.input.min&&g.Modernizr.input.pattern&&g.Modernizr.input.placeholder&&g.Modernizr.input.required&&g.Modernizr.input.step,D=this.get(z),C=E.get(A);E.set(k,B);E._btnsubmit=C.one(E.get("submitbtn"));E._form="FORM"==C.get("tagName").toUpperCase()?C:null;E._fields=new g.NodeList([]);if(B){if(D&&E._form){E.populateInputs();}}else{E.populateInputs();}},isAttributeSupported:function(B){return g.Modernizr.input[B];},isFormValid:function(){var B=this,C=true;B._fields.some(function(D){C=C&&(D.hasClass(d.CLS_VALID)||D.test("input:valid"));return !C;});return C;},populateInputs:function(){var C=this,B=C.get(A);C._fields=B.all("input:not([type=hidden]):not([type=submit]):not([type=button])");C._fields._nodes=C._fields._nodes.concat(B.all("textarea")._nodes);},renderUI:function(){}},{CLS_PLACEHOLDER:e,CLS_VALID:"valid",CLS_INVALID:"invalid",ATTRS:{aftervalidationfx:{validator:h.isFunction,value:null},html5supported:{validator:h.isBoolean,writeOnce:true},submitbtn:{value:"button[type=submit]",validator:h.isString},submitfx:{validator:h.isFunction,value:null}}});g.Node.prototype.getValue=function(){return h.trim(this.get("value"));};g.Node.prototype.toggleClass=function(C,B){this[B?"addClass":"removeClass"](C);};g.mix(g.Node.ATTRS,{autofocus:{getter:function(){return j(this._node,q);},setter:function(B){return i(this._node,q,B);},validator:h.isBoolean},max:{getter:function(){return v(this._node,y);},setter:function(B){return i(this._node,y,B);},validator:h.isNumber},min:{getter:function(){return v(this._node,x);},setter:function(B){return i(this._node,x,B);},validator:h.isNumber},pattern:{getter:function(){return v(this._node,m);},setter:function(B){return i(this._node,m,B);},validator:h.isString},placeholder:{getter:function(){return v(this._node,e);},setter:function(B){return i(this._node,e,B);},validator:h.isString},required:{getter:function(){return j(this._node,p);},setter:function(B){return i(this._node,p,B);},validator:h.isBoolean},step:{getter:function(){return v(this._node,t);},setter:function(B){return i(this._node,t,B);},validator:h.isNumber}});g.HTML5FormSupport=d;},"@VERSION@",{optional:["json"],requires:["base","widget","node","gallery-modernizr"]});