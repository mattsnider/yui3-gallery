YUI.add("gallery-html5-forms",function(g){if(g.JSON){}function l(C,E){var D;C.on("blur",function(){clearTimeout(D);E.apply(C,arguments);});C.on("keydown",function(){var F=arguments;clearTimeout(D);D=setTimeout(function(){E.apply(C,F);},1000);});}function v(D){var C=D.get(z),E=D.getValue();return h.isValue(C)&&E?o(E)<=C:true;}function s(C){var D=C.get(y),E=C.getValue();return h.isValue(D)&&E?o(E)>=D:true;}function f(C){var E=C.get(m),D=C.getValue(),F;if(E&&D){F=RegExp(E);return D.match(F);}return true;}function a(C){var D=C.get(e),E=C.getValue();if(D){if(E&&E!=D){b(C,false);}else{C.set("value",D);b(C,true);}}}function r(C){var D=C.get(e),E=C.getValue();return C.get(p)?E&&E!=D:true;}function n(C){var D=C.get("id"),F=C.get("type"),E,H,G;if("text"==F.toLowerCase()){E=C.get("parentNode").get("innerHTML");H=new RegExp('.*?id="'+D+'"\\s+type="(\\w+)".*',"i");G=new RegExp('.*?type="(\\w+)"\\s+id="'+D+'".*',"i");F=H.exec(E);if(F){return F[1];}else{F=G.exec(E);}}return F?F[1]:"text";}function w(C,D){return C[D]||C.getAttribute(D);}function j(C,D){return C.hasAttribute(D);}function o(C){try{return parseInt(C);}catch(D){return null;}}function i(C,D,E){C[D]=E;C.setAttribute(D,E);}function b(D,C){D.toggleClass(d.CLS_PLACEHOLDER,C);}function x(D){var E=true,C=D.get("tagName").toUpperCase();if("SELECT"!=C){a(D);}E=r(D);if("INPUT"==C){E=E&&f(D);E=E&&v(D);E=E&&s(D);}D.toggleClass(d.CLS_VALID,E);D.toggleClass(d.CLS_INVALID,!E);return E;}var A="aftervalidationfx",q="autofocus",B="boundingBox",u="valid",z="max",y="min",m="pattern",e="placeholder",p="required",t="step",k="html5supported",c={email:/^[A-Z0-9._%-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i,url:/((https?|ftp|gopher|telnet|file|notes|ms-help):((\/\/)|(\\\\))+[\w\d:#@%/;$()~_?\+-=\\\.&]*)/i},h=g.Lang,d=g.Base.create("html5_input_attrs",g.Widget,[],{_handleBlur:function(G){var E=this,C=G.target,F=E.get(k)?G.target.test(":"+d.CLS_VALID):x(C),D=E.get(A);E.disableForm(F&&E.isFormValid());if(D){D(F,C,E);}},_handleFocus:function(F){var C=F.target,D=C.get(e),E=C.getValue();if(E==D){C.set("value","");b(C,false);}},_handleSubmit:function(E){var C=true,D=this.get("submitfx");this._fields.each(function(F){C=C&&x(F);});if(D||!C){E.halt();if(D){D.call(E.target,E,this);}}},bindUI:function(){var F=this,G=false,C=F.get(B),E=false,D=F.get(k);if(D){if(F.get(A)){F._fields.each(function(H){l(H,g.bind(F._handleBlur,F));});}}else{F._fields.each(function(H){var J=H.get(m),K=H.get(z)||H.get(y)||H.get(m)||H.get(p),I=H.get(e),L=n(H);if(L&&c[L]&&!J){H.set(m,c[L]);K=true;}if(I){H.on("focus",g.bind(F._handleFocus,F));}if(H.get(q)&&!G){setTimeout(function(){H.focus();},1);G=true;}x(H);if(K||I){E=true;l(H,g.bind(F._handleBlur,F));}});}if((E||F.get("submitfx"))&&F._form){C.on("submit",g.bind(F._handleSubmit,F));}},disableForm:function(C){if(this._form){this._form[C?"removeAttribute":"set"]("disabled","disabled");}if(this._btnsubmit){this._btnsubmit[C?"removeAttribute":"set"]("disabled","disabled");}},initializer:function(){var F=this,C=g.Modernizr.input.autofocus&&g.Modernizr.input.max&&g.Modernizr.input.min&&g.Modernizr.input.pattern&&g.Modernizr.input.placeholder&&g.Modernizr.input.required&&g.Modernizr.input.step,E=this.get(A),D=F.get(B);F.set(k,C);F._btnsubmit=D.one(F.get("submitbtn"));F._form="FORM"==D.get("tagName").toUpperCase()?D:null;F._fields=new g.NodeList([]);if(C){if(E&&F._form){F.populateInputs();}}else{F.populateInputs();}},isAttributeSupported:function(C){return g.Modernizr.input[C];},isFormValid:function(){var D=this,E=true,C;D._fields.some(function(F){E=E&&(F.hasClass(d.CLS_VALID)||F.test(":"+d.CLS_VALID));return !E;});return E;},populateInputs:function(){var D=this,C=D.get(B);D._fields=C.all("input:not([type=hidden]):not([type=submit]):not([type=button])");D._fields._nodes=D._fields._nodes.concat(C.all("textarea")._nodes);},renderUI:function(){}},{CLS_PLACEHOLDER:e,CLS_VALID:"valid",CLS_INVALID:"invalid",ATTRS:{aftervalidationfx:{validator:h.isFunction,value:null},html5supported:{validator:h.isBoolean,writeOnce:true},submitbtn:{value:"button[type=submit]",validator:h.isString},submitfx:{validator:h.isFunction,value:null}}});g.Node.prototype.getValue=function(){return h.trim(this.get("value"));};g.Node.prototype.toggleClass=function(D,C){this[C?"addClass":"removeClass"](D);};g.mix(g.Node.ATTRS,{autofocus:{getter:function(){return j(this._node,q);},setter:function(C){return i(this._node,q,C);},validator:h.isBoolean},max:{getter:function(){return w(this._node,z);},setter:function(C){return i(this._node,z,C);},validator:h.isNumber},min:{getter:function(){return w(this._node,y);},setter:function(C){return i(this._node,y,C);},validator:h.isNumber},pattern:{getter:function(){return w(this._node,m);},setter:function(C){return i(this._node,m,C);},validator:h.isString},placeholder:{getter:function(){return w(this._node,e);},setter:function(C){return i(this._node,e,C);},validator:h.isString},required:{getter:function(){return j(this._node,p);},setter:function(C){return i(this._node,p,C);},validator:h.isBoolean},step:{getter:function(){return w(this._node,t);},setter:function(C){return i(this._node,t,C);},validator:h.isNumber}});g.HTML5FormSupport=d;},"@VERSION@",{optional:["json"],requires:["base","widget","node","gallery-modernizr"]});