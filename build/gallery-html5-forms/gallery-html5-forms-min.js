YUI.add("gallery-html5-forms",function(g){if(g.JSON){}function l(A,C){var B;A.on("blur",function(){clearTimeout(B);C.apply(A,arguments);});A.on("keydown",function(){var D=arguments;clearTimeout(B);B=setTimeout(function(){C.apply(A,D);},1000);});}function u(B){var A=B.get(y);return h.isValue(A)?o(B.getValue())<=A:true;}function s(A){var B=A.get(x);return h.isValue(B)?o(A.getValue())>=B:true;}function f(A){var B=A.get(m),C;if(B){C=RegExp(B);return A.getValue().match(C);}return true;}function a(A){var B=A.get(e),C=A.getValue();if(B){if(C&&C!=B){b(A,false);}else{A.set("value",B);b(A,true);}}}function r(A){var B=A.get(e),C=A.getValue();return A.get(p)?C&&C!=B:true;}function n(A){var B=A.get("id"),D=A.get("type"),C,F,E;if("text"==D.toLowerCase()){C=A.get("parentNode").get("innerHTML");F=new RegExp('.*?id="'+B+'"\\s+type="(\\w+)".*',"i");E=new RegExp('.*?type="(\\w+)"\\s+id="'+B+'".*',"i");D=F.exec(C);if(D){return D[1];}else{D=E.exec(C);}}return D?D[1]:"text";}function v(A,B){return A[B]||A.getAttribute(B);}function j(A,B){return A.hasAttribute(B);}function o(A){try{return parseInt(A);}catch(B){return null;}}function i(A,B,C){A[B]=C;A.setAttribute(B,C);}function b(B,A){B.toggleClass(d.CLS_PLACEHOLDER,A);}function w(B){var C=true,A=B.get("tagName").toUpperCase();if("SELECT"!=A){a(B);}C=r(B);if("INPUT"==A){C=C&&f(B);C=C&&u(B);C=C&&s(B);}B.toggleClass(d.CLS_VALID,C);B.toggleClass(d.CLS_INVALID,!C);return C;}var q="autofocus",z="boundingBox",y="max",x="min",m="pattern",e="placeholder",p="required",t="step",k="html5supported",c={email:/^[A-Z0-9._%-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i,url:/((https?|ftp|gopher|telnet|file|notes|ms-help):((\/\/)|(\\\\))+[\w\d:#@%/;$()~_?\+-=\\\.&]*)/i},h=g.Lang,d=g.Base.create("html5_input_attrs",g.Widget,[],{_handleBlur:function(D){var B=this,A=D.target,C=B.get(k)?D.target.test("input:valid"):w(A);B.disableForm(C&&B.isFormValid());B.get("aftervalidationfx")(C,A,B);},_handleFocus:function(D){var A=D.target,B=A.get(e),C=A.getValue();if(C==B){A.set("value","");b(A,false);}},_handleSubmit:function(C){var A=true,B=this.get("submitfx");this._fields.each(function(D){A=A&&w(D);});if(B||!A){C.halt();if(B){B.call(C.target,C,this);}}},bindUI:function(){var D=this,E=false,A=D.get(z),C=false,B=D.get(k);if(!B){D._fields.each(function(F){var H=F.get(m),I=F.get(y)||F.get(x)||F.get(m)||F.get(p),G=F.get(e),J=n(F);if(J&&c[J]&&!H){F.set(m,c[J]);I=true;}if(F.get(q)&&!E){F.focus();E=true;}if(G){F.on("focus",g.bind(D._handleFocus,D));}w(F);if(I||G){C=true;l(F,g.bind(D._handleBlur,D));}});}if((C||D.get("submitfx"))&&D._form){A.on("submit",g.bind(D._handleSubmit,D));}},disableForm:function(A){if(this._form){this._form[A?"removeAttribute":"set"]("disabled","disabled");}if(this._btnsubmit){this._btnsubmit[A?"removeAttribute":"set"]("disabled","disabled");}},initializer:function(){var D=this,A=g.Modernizr.input.autofocus&&g.Modernizr.input.max&&g.Modernizr.input.min&&g.Modernizr.input.pattern&&g.Modernizr.input.placeholder&&g.Modernizr.input.required&&g.Modernizr.input.step,C=this.get("aftervalidationfx"),B=D.get(z);D.set(k,A);D._btnsubmit=B.one(D.get("submitbtn"));D._form="FORM"==B.get("tagName").toUpperCase()?B:null;D._fields=new g.NodeList([]);if(A){if(C&&D._form){D.populateInputs();}}else{D.populateInputs();}},isAttributeSupported:function(A){return g.Modernizr.input[A];},isFormValid:function(){var A=this,B=true;A._fields.some(function(C){B=B&&(C.hasClass(d.CLS_VALID)||C.test("input:valid"));return !B;});return B;},populateInputs:function(){var B=this,A=B.get(z);B._fields=A.all("input:not([type=hidden]):not([type=submit]):not([type=button])");B._fields._nodes=B._fields._nodes.concat(A.all("textarea")._nodes);},renderUI:function(){}},{CLS_PLACEHOLDER:e,CLS_VALID:"valid",CLS_INVALID:"invalid",ATTRS:{aftervalidationfx:{validator:h.isFunction,value:function(){}},html5supported:{validator:h.isBoolean,writeOnce:true},submitbtn:{value:"button[type=submit]",validator:h.isString},submitfx:{validator:h.isFunction,value:null}}});g.Node.prototype.getValue=function(){return h.trim(this.get("value"));};g.Node.prototype.toggleClass=function(B,A){this[A?"addClass":"removeClass"](B);};g.mix(g.Node.ATTRS,{autofocus:{getter:function(){return j(this._node,q);},setter:function(A){return i(this._node,q,A);},validator:h.isBoolean},max:{getter:function(){return v(this._node,y);},setter:function(A){return i(this._node,y,A);},validator:h.isNumber},min:{getter:function(){return v(this._node,x);},setter:function(A){return i(this._node,x,A);},validator:h.isNumber},pattern:{getter:function(){return v(this._node,m);},setter:function(A){return i(this._node,m,A);},validator:h.isString},placeholder:{getter:function(){return v(this._node,e);},setter:function(A){return i(this._node,e,A);},validator:h.isString},required:{getter:function(){return j(this._node,p);},setter:function(A){return i(this._node,p,A);},validator:h.isBoolean},step:{getter:function(){return v(this._node,t);},setter:function(A){return i(this._node,t,A);},validator:h.isNumber}});g.HTML5FormSupport=d;},"@VERSION@",{optional:["json"],requires:["base","widget","node","gallery-modernizr"]});