YUI.add("gallery-form-utils",function(e){var b="disabled",c=e.Lang,a={DEFAULT_ELEMENTS:["input","select","textarea"],findFirstElement:function(f,g){return a.getElements(f,g||["hidden"],true);},focusFirstElement:function(f,g){a.Element.focus(a.findFirstElement(f,g));},getElements:function(g,h,i){var j=[],f=function(k){k.find(function(m){if(document.ELEMENT_NODE===m.get("nodeType")){if(m.isTagName.apply(m,a.DEFAULT_ELEMENTS)){var l=m.get("type");if(!(h&&e.Array.find(h,function(n){return n==l;}))){j.push(m);if(i){return true;}}}else{if(m.hasChildNodes()){f(m.get("childNodes"));}}}});};f(g.get("childNodes"));return i?j[0]:new e.NodeList(j);},getInputs:function(f,i,g){var h="input";if(i){h+="[type="+i+"]";}if(g){h+="[name="+g+"]";}return f.all("input");},serialize:function(f){var g=[];a.getElements(f).each(function(i){var h=d.serialize(i);if(h){g.push(h);}});return g.join("&");}};e.FormUtils=a;var d={DO_NOT_SERIALIZE_FIELD_NAMES:["validator"],attachFocusAndBlur:function(k,i,h){var g=k.ancestor("form"),l;i=c.trim(i);function j(m,n){k.set("value",m);k[n?"addClass":"removeClass"](n);}function f(){if(i==c.trim(k.get("value"))){j("","");}}k.on("focus",f);k.on("blur",function(){if(!c.trim(k.get("value"))){j(i,h);}});if(g){g.on("submit",e.bind(f,k));}l=c.trim(k.get("value"));if(i==l||""===l){j(i,h);}},attachSubmitValidator:function(h,i,k){var f=h.ancestor("form"),j;function g(){clearTimeout(j);f[i.exec(c.trim(h.get("value")))?"addClass":"removeClass"]("valid");}h.on("focus",g);h.on("blur",g);h.on("keydown",function(){j=setTimeout(g,2000);});f.on("submit",function(l){g();if(f.hasClass("valid")){k(l);}else{l.halt();}});},check:function(g,f){if(g.get("checked")!==f){g.set("checked",f);}},clear:function(f){if("select"==f.get("tagName")){f.set("selectedIndex",0);}else{if("checkbox"==f.get("type")){f.set("checked",false);}else{f.set("value","");}}},disable:function(f){f.addClass(b);f.set(b,true);},enable:function(f){f.removeClass(b);f.set(b,false);},focus:function(g,f){var h=g.get("region");if(h.left||h.top||h.width||h.height){setTimeout(function(){g.focus();if(!f){g.select();}},1);}},getValue:function(h){var g=h.getTagName(),f=FormFieldSerializers[g](h);return f?f[1]:"";},hasValue:function(f){return""!==d.getValue(f);},isType:function(g){var h=g.getType("type");if(!h){return false;}for(var f=1;f<arguments.length;f+=1){if(h==arguments[f]){return true;}}return false;},serialize:function(i){var g=i.getTagName(),f,h;if(-1===e.Array.indexOf(d.DO_NOT_SERIALIZE_FIELD_NAMES,g)){f=FormFieldSerializers[g](i);if(f){h=encodeURIComponent(c.trim(f[0]));if(0===h.length){return"";}if(!c.isArray(f[1])){f[1]=[c.trim(f[1])];}e.Array.each(f[1],function(k,j){f[1][j]=h+"="+encodeURIComponent(k);});return f[1].join("&");}}return"";}};e.FormUtilsField=d;FormFieldSerializers={input:function(f){switch(f.get("type")){case"checkbox":case"radio":return FormFieldSerializers.inputSelector(f);default:return FormFieldSerializers.textarea(f);}},inputSelector:function(f){if(f.get("checked")){return FormFieldSerializers.textarea(f);}},textarea:function(f){return[f.get("name"),f.get("value")];},select:function(f){return FormFieldSerializers["select-one"==f.get("type")?"selectOne":"selectMany"](f);},selectOne:function(g){var i="",f=g.get("selectedIndex"),h;if(0<=f){h=g.get("options").item(f);i=h.get("value")||h.get("text");}return[g.get("name"),i];},selectMany:function(g){var i=[],f=0,h;for(;f<g.length;f+=1){h=g.get("options").item(f);if(h.get("selected")){i.push(c.trim(h.get("value")||h.get("text")));}}return[g.get("name"),i];}};e.FormUtilsFieldSerializers=FormFieldSerializers;},"@VERSION@",{requires:["node","collection"]});